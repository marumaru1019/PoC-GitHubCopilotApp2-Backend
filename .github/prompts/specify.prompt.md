---
mode: architect
description: ユーザーの要望を要件定義に変換する（技術要素は一切含めない）
---

# 仕様定義ワークフロー

## Steps

### Step 1: Context Loading
- `#codebase` でプロジェクト概要を確認
- 既存の仕様書（`[仕様書フォルダ]/*/`）を検索
- ビジネス要件と類似機能を参考にする

### Step 2: Execution
ユーザーの要望を以下の観点で整理（**技術的な実装方法は一切含めない**）:

1. **ユーザーストーリー**: "As a [誰が], I want to [何を], So that [なぜ]"
2. **受け入れ条件**: ユーザーから見て何ができれば満たされるか
3. **ユーザーシナリオ**: ユーザーがどのような手順で操作するか
4. **ビジネス価値**: なぜこの機能が必要か、どんな効果があるか

**重要な制約**:
- ❌ 技術スタック（React, FastAPI, PostgreSQL等）には言及しない
- ❌ データベース設計やAPI設計には言及しない
- ❌ UIコンポーネント名や実装方法には言及しない
- ✅ あくまで「ユーザーにとって何ができるようになるか」に焦点を当てる

### Step 3: Structured Output
以下の形式で仕様書ドラフトをチャットで表示(実際の仕様書は作らない):

\```markdown
# [機能名] 仕様書

作成日: YYYY-MM-DD

## ユーザーストーリー
**As a** [役割（例: サポート担当者）]
**I want to** [実現したいこと（例: チケットを検索できる）]
**So that** [目的（例: 目的のチケットを素早く見つけられる）]

## 受け入れ条件
- [ ] [ユーザーができること1（例: 検索ボックスが表示されている）]
- [ ] [ユーザーができること2（例: キーワードを入力すると該当するチケットが表示される）]
- [ ] [ユーザーができること3（例: 検索結果が即座に反映される）]

## ユーザーシナリオ
1. **開始**: [ユーザーがどこから始めるか]
2. **アクション**: [ユーザーが何をするか]
3. **結果**: [ユーザーに何が表示されるか/体験できるか]
4. **完了**: [最終的にどうなるか]

## ビジネス価値
- **効率性**: [期待される効果（例: 検索時間を70%短縮）]
- **品質**: [期待される効果（例: 見落としリスクがゼロ）]
- **ユーザー満足度**: [期待される効果（例: ストレスなく探せる）]
\```

**この段階では以下を含めないこと**:
- 技術的な実装方法（API、データベース、フレームワーク等）
- UIコンポーネントの具体的な名前
- データモデルやスキーマ設計
- 実装の詳細や手順

### Step 4: Validation Gate (🚨 STOP)
**ここで必ずユーザーの承認を待つ**

仕様書ドラフトを提示し、以下を確認してもらう:
- [ ] ユーザーストーリーが明確か
- [ ] 受け入れ条件が具体的で測定可能か
- [ ] ユーザーシナリオが実際の使い方を反映しているか
- [ ] ビジネス価値が明確か
- [ ] **技術的な要素が含まれていないか**（重要）

- ✅ **承認された場合**: Step 5へ進む
- ❌ **修正が必要な場合**: Step 2に戻る

### Step 5: File Creation
承認後、`[仕様書フォルダ]/[機能名]/[機能名].spec.md` を作成する。

**次のステップ**: `/plan` で技術設計を作成（技術的な要素は次のフェーズで決定）
